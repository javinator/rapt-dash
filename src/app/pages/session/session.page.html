<div class="header">
  <h1>Sessions</h1>
  <div>
    @if (!detailSession()) {
      <button (click)="createSession()" class="nav-button">
        <mat-icon fontIcon="library_add"></mat-icon>
      </button>
    } @else if (parseInt(detailSession()!.id) > 0) {
      <button (click)="deleteSession()" class="nav-button">
        <mat-icon fontIcon="delete"></mat-icon>
      </button>
    }
    <button (click)="navigateBack()" class="nav-button">
      <mat-icon fontIcon="arrow_back"></mat-icon>
    </button>
  </div>
</div>
<div class="card">
  @if (loading()) {
    <rd-spinner></rd-spinner>
  } @else {
    @if (sessions().length === 0) {
      <h4>No sessions yet!</h4>
    } @else if (detailSession()) {
      <rd-session-form
        [session]="detailSession()"
        (form)="this.saveSession($event)"
      ></rd-session-form>
    } @else {
      <div>
        @for (session of sessions(); track session.id) {
          <button class="session-button" (click)="editSession(session.id)">
              <h4>{{ session.name }}</h4>
            @if (DateUtil.isActive(session.end)) {
              (active)
            } @else {
              ({{ session.start | date: 'dd/MM/yyyy' }} -
              {{ session.end | date: 'dd/MM/yyyy' }})
            }
            <mat-icon fontIcon="edit_note"></mat-icon>
          </button>
        }
      </div>
    }
  }
</div>
